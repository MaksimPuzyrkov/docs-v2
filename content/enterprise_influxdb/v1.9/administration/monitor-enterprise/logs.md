---
title: Log and trace InfluxDB Enterprise operations
description: >
  Learn about logging locations, redirecting HTTP request logging, structured logging, and tracing.
menu:
  enterprise_influxdb_1_9:
    name: Log and trace
    weight: 90
    parent: Administration
---

InfluxDB writes log output, by default, to `stderr`.
Depending on your use case, you may opt to write this log information to another location. 
Some service managers may override this default.

* [Redirect HTTP request logging](#redirect-http-access-logging)
* [Structured logging](#structured-logging)
* [Tracing](#tracing)

## Run InfluxDB as a command

To write log output to `stderr`, redirect `stderr` to a file:

```
influxdb-meta 2>$HOME/my_log_file # Meta nodes
influxd 2>$HOME/my_log_file # Data nodes
```

## Write log output to log file 

### Use logrotate

You can use logrotate to rotate the log files generated by InfluxDB on systems where logs are written to flat files.

To use logrotate, create a configuration file that specify which logfiles to rotate. Learn more about logrotate and configuration files [here](http://manpages.ubuntu.com/manpages/cosmic/en/man8/logrotate.8.html).

### systemd

Starting with version 1.0, InfluxDB on systemd systems no longer
writes files to `/var/log/<node-type>.log` by default, and now uses the
system configured default for logging (usually `journald`).  

To access the logs directed to the systemd journal, use this command: 

```
sudo journalctl -u <node-type>.service
```

Please consult the systemd journald documentation for configuring
`journald`.

##### Meta nodes

For meta nodes the <node-type> is `influxdb-meta`.
The default log command is `sudo journalctl -u influxdb-meta.service`
The service configuration file is `/etc/default/influxdb-meta`.

##### Data nodes

For data nodes the <node-type> is `influxdb`.
The default log command is `sudo journalctl -u influxdb.service`
The service configuration file is `/etc/default/influxdb`.

## Redirect HTTP access logging

InfluxDB introduces the option to log HTTP request traffic separately from the other InfluxDB log output. When HTTP request logging is enabled, the HTTP logs are intermingled by default with internal InfluxDB logging. By redirecting the HTTP request log entries to a separate file, both log files are easier to read, monitor, and debug.

To redirect HTTP request logging, do the following: 

1. Locate the `[http]` section of your InfluxDB configuration file. 
2. Set the `access-log-path` option to specify the path where HTTP log entries should be written.

**Notes:**

* If `influxd` is unable to access the specified path, it will log an error and fall back to writing the request log to `stderr`.
* The `[httpd]` prefix is stripped when HTTP request logging is redirected to a separate file, allowing access log parsing tools (like [lnav](https://lnav.org)) to render the files without additional modification.
* To rotate the HTTP request log file, use the `copytruncate` method of `logrotate` or similar to leave the original file in place.

See [Redirecting HTTP request logging](/enterprise_influxdb/v1.8/administration/logs/#redirecting-http-access-logging) in the InfluxDB OSS documentation to learn more. 

## Structured logging

Structured logging is supported and enable machine-readable and more developer-friendly log output formats. The two structured log formats, `logfmt` and `json`, provide easier filtering and searching with external tools and simplifies integration of InfluxDB logs  with Splunk, Papertrail, Elasticsearch, and other third party tools.

Many use JSON structured logging in InfluxDB Enterprise so you can easily parse the logs.

Use the InfluxDB logging configuration options (in the `[logging]` section) with some of the included following options:

* `format`: `auto` (default) | `logfmt` | `json`
* `level`: `error` | `warn` | `info` (default) | `debug`
* `suppress-logo`: `false` (default) | `true`

For details on these logging configuration options and their corresponding environment variables, see [Logging options](/influxdb/v1.8/administration/config#logging-settings) in the configuration file documentation.

## Tracing

Logging has been enhanced, starting in InfluxDB, to provide tracing of important InfluxDB operations. Tracing is useful for error reporting and discovering performance bottlenecks.

### Logging keys used in tracing

#### Tracing identifier key

The `trace_id` key specifies a unique identifier for a specific instance of a trace. Use this key to filter and correlate all related log entries for an operation.

All operation traces include consistent starting and ending log entries, with the same message (`msg`) describing the operation (e.g., "TSM compaction"), but adding the appropriate `op_event` context (either `start` or `end`). For an example, see [Finding all trace log entries for an InfluxDB operation](/influxdb/v1.8/administration/logs/#finding-all-trace-log-entries-for-an-influxdb-operation).

**Example:** `trace_id=06R0P94G000`

#### Log identifier context key

Easily identify _every_ log entry with the log identifier key (`log_id`) for a single execution of an `influxd` process. 

There are other ways a log file could be split by a single execution, but the consistent `log_id` eases the searching of log aggregation services.

For more information about tracing InfluxDB operations, see [here](/influxdb/v1.8/administration/logs/#tracing). 